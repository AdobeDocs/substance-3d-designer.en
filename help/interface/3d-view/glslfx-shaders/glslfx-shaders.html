<header><meta name="title" content="GLSLFX Shaders | Substance 3D Designer"><meta name="description" content=""><meta name="helpx_description" content="Designer > Interface > 3D View > GLSLFX Shaders"></header><body><div class="dexter-Position is-Editor-false" daa-im="true" daa-lh="Helpx In-article Navigation" data-animations="[]" id="root_content_flex_items_position" role="">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text first-heading aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h1 id="mainpagetitle">GLSLFX Shaders</h1>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>GLSLFX files make the bridge between the application and the glsl shader files.<br/>It allows to use any glsl shader without having to modify the code.</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h2 id="GLSLFXShaders-FileFormat">File Format</h2>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>GLSLFX file format is a XML file. Comments are supported.</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-HeaderandRootnode">Header and Root node</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>The XML root node element is named <b>glslfx</b>.</p>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;glslfx version="1.0.0" author="allegorithmic.com"&gt;
    &lt;!-- BODY --&gt;
    &lt;!-- ... --&gt;
&lt;/glslfx&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-Body">Body</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4 id="GLSLFXShaders-1.Techniques">Technique</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>XML Element that describes a technique. A technique is a variation of the current FX. A GLSLFX can contain multiple techniques but at least one technique has to be defined.</p>
<p>The geometry will be rendered with one of the techniques defined by the application.</p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="XMLelementdefinitionTechnique">
<spectrum-accordion-item data-label="XML element definition" data-titleid="item-XMLelementdefinition-XMLelementdefinitionTechnique">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-XMLelementdefinition-XMLelementdefinitionTechnique">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><span style="color: rgb(80,80,80);"><b>Name:</b> </span><span class="code">technique</span><br/>
</p>
<p><b>Attributes:</b></p>
<ul>
<li><span class="code">name</span>: Any string used to name the technique</li>
</ul>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="LowResShader"&gt;
    &lt;!-- ... --&gt;
&lt;/technique&gt;
&lt;!-- ... --&gt;
&lt;technique name="HighResShader"&gt;
    &lt;!-- ... --&gt;
&lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>The XML element can have multiples children. The elements defined in a techniques override the elements defined globally.</p>
<p>For example, it is used to override some uniforms values and obtain FX variation for this technique.</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4>Render Pass</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>XML Element that describes a render pass. A render pass describes the rendering of the geometry.</p>
<p>A technique can contain multiple render passes that will be executed sequentially. A technique containing no render pass is equivalent to a technique containing an 'onscreen' render pass.</p>
<p>The elements defined in a render pass override the elements defined in the parent technique.</p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="XMLelementdefinitionRenderpass">
<spectrum-accordion-item data-label="XML element definition" data-titleid="item-XMLelementdefinition-XMLelementdefinitionRenderpass">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-XMLelementdefinition-XMLelementdefinitionRenderpass">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><b>Name:</b> <span class="code">pass</span></p>
<p><b>Attributes:</b></p>
<ul>
<li><span class="code">output</span></li>
<li><span class="code">offscreen</span>: The rendering will be done into user defined render targets</li>
<li><span class="code">onscreen</span>: The rendering will be done into the default render target</li>
</ul>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="MultipassTechnique"&gt;
    &lt;!-- RENDER PASSES --&gt;
    &lt;pass output="offscreen"&gt;
         &lt;!-- ... --&gt;
    &lt;/pass&gt;
    &lt;!-- ... --&gt;
    &lt;pass output="onscreen"&gt;
         &lt;!-- ... --&gt;
    &lt;/pass&gt;
&lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4>Shaders</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Set the GLSL shader files for each type.</p>
<p><u>XML Element Definition:</u></p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="XMLelementdefinitionShaders">
<spectrum-accordion-item data-label="XML element definition" data-titleid="item-XMLelementdefinition-XMLelementdefinitionShaders">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-XMLelementdefinition-XMLelementdefinitionShaders">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><b>Name:</b> <span class="code">shader</span></p>
<p><b>Attributes:</b></p>
<ul>
<li><span class="code">type</span>: The GLSL shader type;<br/>
</li>
<li><span class="code">filename</span>: The path of the glsl shader file. Can be absolute or relative to the GLSLFX file;<br/>
</li>
<li><span class="code">primitiveType</span>: The method to render the primitive.<br/>
</li>
</ul>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> </colgroup><tbody><tr><th>'type' Value</th><th>Description</th></tr><tr><td>vertex</td><td>Vertex shader</td></tr><tr><td>geometry</td><td>Geometry shader</td></tr><tr><td>tess_control</td><td>Tessellation Control shader</td></tr><tr><td>tess_eval</td><td>Tessellation Evaluation shader</td></tr><tr><td>fragment</td><td>Fragment shader</td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> </colgroup><tbody><tr><th>'primitiveType' Value</th><th>Description</th></tr><tr><td>point</td><td>Render as points</td></tr><tr><td>lineloop</td><td>Render as line loop</td></tr><tr><td>patch[1..N]</td><td>Render as patches with [1..N] vertices</td></tr></tbody></table>
</div>
</div>
<div class="dexter-Spacer aem-GridColumn aem-GridColumn--default--12"><style>

#root_content_flex_items_position_position-par_accordion_1877687351_content-XMLelementdefinition_spacer_copy {
    height: 8px;
}



</style>
<div class="false" id="root_content_flex_items_position_position-par_accordion_1877687351_content-XMLelementdefinition_spacer_copy"></div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="Tessellation"&gt;
    &lt;!-- SHADERS --&gt;
    &lt;shader type="vertex" filename="tessellation_parallax/tessellation/vs.glsl" primitiveType="patch4"/&gt;
    &lt;shader type="tess_control" filename="tessellation_parallax/tessellation/tcs.glsl"/&gt;
    &lt;shader type="tess_eval" filename="tessellation_parallax/tessellation/tes.glsl"/&gt;
    &lt;shader type="fragment" filename="tessellation_parallax/fs.glsl"/&gt;
&lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4>Properties</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Allow to set up some part of the OpenGL state.</p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="XMLelementdefinitionProperties">
<spectrum-accordion-item data-label="XML element definition" data-titleid="item-XMLelementdefinition-XMLelementdefinitionProperties">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-XMLelementdefinition-XMLelementdefinitionProperties">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><b>Name:</b> <span class="code">property</span></p>
<p><b>Attributes:</b></p>
<ul>
<li><span class="code">name</span>: The name of the property to set. The name is based on the OpenGL function or glEnum name:<br/>
<ul>
<li>Enums syntax: W<span style="color: rgb(80,80,80);">ithout the 'GL_' prefix, in lower case. Examples: glEnable(GL_BLEND_ENABLE) =&gt; """, glDisable(GL_CULL_FACE) =&gt; """</span></li>
<li>Functions syntax: <span style="color: rgb(80,80,80);">without the 'gl' prefix, in lower case and with all words separated with '_' character. Example: glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA) =&gt; ""</span></li>
</ul>
</li>
<li><span class="code">value</span>: The value of the property.</li>
</ul>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> <col/> </colgroup><tbody><tr><th>'name' Values</th><th>'value' Values</th><th>Description</th></tr><tr><td>blend_enabled</td><td>boolean</td><td>Enable/disable the blending mode</td></tr><tr><td><br/></td><td>true</td><td><br/></td></tr><tr><td><br/></td><td>false</td><td><br/></td></tr><tr><td>blend_func</td><td>string, string</td><td>Set the sources and destination blending functions</td></tr><tr><td><br/></td><td>zero</td><td>for OpenGL enum GL_ZERO</td></tr><tr><td><br/></td><td>one</td><td>for OpenGL enum GL_ONE</td></tr><tr><td><br/></td><td>src_color</td><td>for OpenGL enum GL_SRC_COLOR</td></tr><tr><td><br/></td><td>one_minus_src_color</td><td>for OpenGL enum GL_ONE_MINUS_SRC_COLOR</td></tr><tr><td><br/></td><td>dst_color</td><td>for OpenGL enum GL_DST_COLOR</td></tr><tr><td><br/></td><td>one_minus_dst_color</td><td>for OpenGL enum GL_ONE_MINUS_DST_COLOR</td></tr><tr><td><br/></td><td>src_alpha</td><td>for OpenGL enum GL_SRC_ALPHA</td></tr><tr><td><br/></td><td>one_minus_src_alpha</td><td>for OpenGL enum GL_ONE_MINUS_SRC_ALPHA</td></tr><tr><td><br/></td><td>dst_alpha</td><td>for OpenGL enum GL_DST_ALPHA</td></tr><tr><td><br/></td><td>one_minus_dst_alpha</td><td>for OpenGL enum GL_ONE_MINUS_DST_ALPHA</td></tr><tr><td><br/></td><td>constant_color</td><td>for OpenGL enum GL_CONSTANT_COLOR</td></tr><tr><td><br/></td><td>one_minus_constant_color</td><td>for OpenGL enum GL_ONE_MINUS_CONSTANT_COLOR</td></tr><tr><td><br/></td><td>constant_alpha</td><td>for OpenGL enum GL_CONSTANT_ALPHA</td></tr><tr><td><br/></td><td>one_minus_constant_alpha</td><td>for OpenGL enum GL_ONE_MINUS_CONSTANT_ALPHA</td></tr><tr><td><br/></td><td>src_alpha_saturate</td><td>for OpenGL enum GL_SRC_ALPHA_SATURATE</td></tr><tr><td colspan="1"><br/></td><td colspan="1">src1_color</td><td colspan="1">for OpenGL enum GL_SRC1_COLOR</td></tr><tr><td colspan="1"><br/></td><td colspan="1">one_minus_src1_color</td><td colspan="1">for OpenGL enum GL_ONE_MINUS_SRC1_COLOR</td></tr><tr><td colspan="1"><br/></td><td colspan="1">src1_alpha</td><td colspan="1">for OpenGL enum GL_SRC1_ALPHA</td></tr><tr><td colspan="1"><br/></td><td colspan="1">one_minus_src1_alpha</td><td colspan="1">for OpenGL enum GL_ONE_MINUS_SRC1_ALPHA</td></tr><tr><td colspan="1">cull_face_enabled</td><td colspan="1">boolean</td><td colspan="1">Enable/disable the face culling</td></tr><tr><td colspan="1"><br/></td><td colspan="1">true</td><td colspan="1"><br/></td></tr><tr><td colspan="1"><br/></td><td colspan="1">false</td><td colspan="1"><br/></td></tr><tr><td colspan="1">cull_face_mode</td><td colspan="1">string</td><td colspan="1">Set the face culling mode</td></tr><tr><td colspan="1"><br/></td><td colspan="1">front</td><td colspan="1">for OpenGL enum GL_FRONT</td></tr><tr><td colspan="1"><br/></td><td colspan="1">back</td><td colspan="1">for OpenGL enum GL_BACK</td></tr><tr><td colspan="1"><br/></td><td colspan="1">front_and_back</td><td colspan="1">for OpenGL enum GL_FRONT_AND_BACK</td></tr><tr><td colspan="1">depth_func</td><td colspan="1">string</td><td colspan="1">Set the depth compare function</td></tr><tr><td colspan="1"><br/></td><td colspan="1">never</td><td colspan="1">for OpenGL enum GL_NEVER</td></tr><tr><td colspan="1"><br/></td><td colspan="1">less</td><td colspan="1"><span>for OpenGL enum GL_LESS</span></td></tr><tr><td colspan="1"><br/></td><td colspan="1">lequal</td><td colspan="1"><span>for OpenGL enum GL_LEQUAL</span></td></tr><tr><td colspan="1"><br/></td><td colspan="1">equal</td><td colspan="1"><span>for OpenGL enum GL_EQUAL</span></td></tr><tr><td colspan="1"><br/></td><td colspan="1">notequal</td><td colspan="1"><span>for OpenGL enum GL_NOTEQUAL</span></td></tr><tr><td colspan="1"><br/></td><td colspan="1">gequal</td><td colspan="1"><span>for OpenGL enum GL_GEQUAL</span></td></tr><tr><td colspan="1"><br/></td><td colspan="1">greater</td><td colspan="1"><span>for OpenGL enum GL_GREATER</span></td></tr><tr><td colspan="1"><br/></td><td colspan="1">always</td><td colspan="1"><span>for OpenGL enum GL_ALWAYS</span></td></tr></tbody></table>
</div>
</div>
<div class="dexter-Spacer aem-GridColumn aem-GridColumn--default--12"><style>

#root_content_flex_items_position_position-par_accordion_2016875008_content-XMLelementdefinition_spacer_copy {
    height: 8px;
}



</style>
<div class="false" id="root_content_flex_items_position_position-par_accordion_2016875008_content-XMLelementdefinition_spacer_copy"></div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="LowResShader"&gt;
    &lt;!-- PROPERTIES --&gt;
    &lt;property name="blend_enabled" value="true"/&gt;
    &lt;property name="blend_func" value="src_alpha,one_minus_src_alpha"/&gt;
    &lt;property name="cull_face_enabled" value="true"/&gt;
    &lt;property name="cull_face_mode" value="back"/&gt;
    &lt;property name="depth_func" value="lequal"/&gt;
 &lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4>Uniforms</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Allow to override some uniforms defined globally or in the parent technique. This allow to change shader behavior for this technique or render pass.</p>
<p>See the <b>Uniforms</b> section below for more details about their definition.</p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="ExampleUniforms">
<spectrum-accordion-item data-label="Example" data-titleid="item-Example-ExampleUniforms">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-Example-ExampleUniforms">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="Tesselation"&gt;
    &lt;!-- SHADERS --&gt;
    &lt;shader type="vertex" filename="tessellation_parallax/tessellation/vs.glsl" primitiveType="patch4"/&gt;
    &lt;shader type="tess_control" filename="tessellation_parallax/tessellation/tcs.glsl"/&gt;
    &lt;shader type="tess_eval" filename="tessellation_parallax/tessellation/tes.glsl"/&gt;
    &lt;shader type="fragment" filename="tessellation_parallax/fs.glsl"/&gt;

    &lt;!-- UNIFORMS --&gt;
    &lt;uniform name="parallax_mode" guiName="Parallax Mode" min="0" max="0" /&gt;
    &lt;uniform name="enableTilingInFS" guiName="Tiling Enabled In FS" min="0" max="0" /&gt;
    &lt;uniform name="tessellationFactor" guiName="Tessellation Factor" default="4" min="1" max="64" guiStep="1" guiWidget="slider"/&gt;
&lt;/technique&gt;

&lt;technique name="Parallax"&gt;
    &lt;!-- RENDER PASSES --&gt;
    &lt;pass output="onscreen"&gt;
        &lt;!-- SHADERS --&gt;
        &lt;shader type="vertex" filename="tessellation_parallax/parallax/vs.glsl"/&gt;
        &lt;shader type="fragment" filename="tessellation_parallax/fs.glsl"/&gt;

        &lt;!-- UNIFORMS --&gt;
        &lt;uniform name="parallax_mode" guiName="Parallax Mode" min="1" max="1" /&gt;
        &lt;uniform name="enableTilingInFS" guiName="Tiling Enabled In FS" min="1" max="1" /&gt;
    &lt;/pass&gt;
&lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h2>Render Targets</h2>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>For 'offscreen' render passes, render targets must be defined in the render pass.<br/>
</p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="XMLelementdefinitionRendertargets">
<spectrum-accordion-item data-label="XML element definition" data-titleid="item-XMLelementdefinition-XMLelementdefinitionRendertargets">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-XMLelementdefinition-XMLelementdefinitionRendertargets">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><b>Name:</b> <span class="code">output</span></p>
<p><b>Attributes:</b></p>
<ul>
<li><p><span class="code">attachment</span>: The OpenGL attachment point, inspired by the OpenGL names:<br/>
GL_COLOR_ATTACHMENT[0..3] =&gt; 'color[0..3]'<br/>
GL_DEPTH_ATTACHMENT =&gt; 'depth'</p>
</li>
<li><p><span class="code">name</span>: the name of the render target.<br/>
It can be used in a later render pass to bind this render target as a sampler.</p>
</li>
<li><p><span class="code">format</span>: the internal format of the render target.</p>
</li>
</ul>
<ul>
<li><span class="code">clear</span>: optional attribute that defines a clear value.<br/>
If present, the render target will be cleared to this value at the beginning of the render pass.<br/>
If missing, the render target will keep its previous content.</li>
</ul>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="Parallax Occlusion"&gt;
    &lt;!-- RENDER PASSES --&gt;
    &lt;pass output="offscreen"&gt;
        &lt;!-- ... --&gt;
        &lt;!-- RENDER TARGETS --&gt;
        &lt;output attachment="color0" name="sssDiffuse" format="rgba16f"  clear="0.0,0.0,0.0,0.0"/&gt;
        &lt;output attachment="depth"  name="sssDepth"  format="depth42f" clear="1.0"/&gt;
    &lt;/pass&gt;
&lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="helpx-note">
<span class="note-header">
<span class="note-icon"></span>
<span class="note-title">Note</span>
</span>
<div class="cmp-text">
<p>Color render targets are forbidden in an '<span class="code">onscreen</span>' render pass, but a depth render target can be shared with any render pass (but it's likely to break rendering when mixing multiple materials in the scene).</p>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><b>About formats</b></p>
<p>For depth formats, all depth-only (no stencil) OpenGL formats are supported:</p>
<ul>
<li>GL_DEPTH_COMPONENT16 =&gt; 'depth26'</li>
<li>GL_DEPTH_COMPONENT24 =&gt; 'depth34'</li>
<li>GL_DEPTH_COMPONENT32 =&gt; 'depth42'</li>
<li>GL_DEPTH_COMPONENT32F =&gt; 'depth42f'</li>
</ul>
<p>For color formats, the name is based on OpenGL enum names, without the 'GL_' prefix, in lower case.<br/>
Three channel formats (RGB) are not supported, use an RGBA format instead.<br/>
Bit depth per channel supported:</p>
<ul>
<li>Normalized unsigned integer: 8, 16</li>
<li>Floating point: 16, 32</li>
</ul>
<p>An exception to these rules is the GL_R11F_G11F_B10F format which is supported.:</p>
<ul>
<li>GL_RGBA8 =&gt; 'rgba8'</li>
<li>GL_RGBA16F =&gt; 'rgba16f'</li>
<li>GL_SRGB8_ALPHA8 =&gt; 'srgb8_alpha8'</li>
<li>GL_R11F_G11F_B10F =&gt; 'r11f_g11f_b10f'</li>
<li>GL_RG16 =&gt; "rg16"</li>
</ul>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4>Samplers</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Allow to override some samplers defined globally, they cannot be defined in a technique. This allow to define a sampler usage for this render pass, or to read from a render target of a previous render pass.</p>
<p>See the <b>Samplers</b> section for more details about their definition.</p>
</div>
</div>
<div class="accordion aem-GridColumn aem-GridColumn--default--12">
<spectrum-accordion data-name="ExampleSamplers">
<spectrum-accordion-item data-label="Example" data-titleid="item-Example-ExampleSamplers">
</spectrum-accordion-item>
</spectrum-accordion>
<div class="spectrum-Accordion-content">
<div class="item-Example-ExampleSamplers">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;!-- TECHNIQUES --&gt;
&lt;technique name="Parallax Occlusion"&gt;
    &lt;!-- RENDER PASSES --&gt;
    &lt;pass output="offscreen"&gt;
        &lt;!-- ... --&gt;
        &lt;!-- RENDER TARGETS --&gt;
        &lt;output attachment="color0" name="sssDiffuse" format="rgba16f"/&gt;
        &lt;output attachment="depth" name="sssDepth" format="depth42f"/&gt;
    &lt;/pass&gt;
    &lt;pass output="onscreen"&gt;
        &lt;!-- ... --&gt;
        &lt;!-- SAMPLERS --&gt;
        &lt;sampler name="baseColorMap" usage="basecolor,diffuse"/&gt;
        &lt;sampler name="sssDiffuseMap" outputName="sssDiffuse"/&gt;
        &lt;sampler name="sssDepthMap" outputName="sssDepth" /&gt;
    &lt;/pass&gt;
&lt;/technique&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h2>Input Vertex Format</h2>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>This allow to define the semantic of each attributes define in the vertex shader.</p>
<p><b>XML Element Definition:</b></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Name: 'vertexformat'</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Attributes:</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<ul>
<li>'name': The name of the attribute as defined in the vertex shader.</li>
<li>'semantic': The semantic of the attribute.</li>
</ul>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> </colgroup><tbody><tr><th>'semantic' Value</th><th>Description</th></tr><tr><td>position</td><td>Vertex position (float3)</td></tr><tr><td>normal</td><td>Vertex normal (float3)</td></tr><tr><td>texcoord[0..N]</td><td>Vertex texture coordinate buffer N (float2)</td></tr><tr><td>tangent[0..N]</td><td>Vertex tangent buffer N (float4)</td></tr><tr><td>binormal[0..N]</td><td>Vertex binormal buffer N (float4)</td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><u>Example:</u></p>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;glslfx version="1.0.0" author="allegorithmic.com"&gt;
     &lt;!-- BODY --&gt;
     &lt;!-- ... --&gt;

     &lt;!-- INPUT VERTEX FORMAT --&gt;
     &lt;vertexformat name="iVS_Position" semantic="position"/&gt;
     &lt;vertexformat name="iVS_Normal" semantic="normal"/&gt;
     &lt;vertexformat name="iVS_UV" semantic="texcoord0"/&gt;
     &lt;vertexformat name="iVS_Tangent" semantic="tangent0"/&gt;
     &lt;vertexformat name="iVS_Binormal" semantic="binormal0"/&gt;
&lt;/glslfx&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h2>Samplers</h2>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>This allow to define the usage of each samplers.<br/>
It is used by the application to known which texture to set in the specified samplers.</p>
<p><b>XML Element Definition:</b></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Name: 'sampler'</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Attributes:</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<ul>
<li>'name': The name of the sampler variable in the shader file.</li>
<li>'usage': The usage of the sampler. It matches the usage specified in the Ouput node of the graph.</li>
</ul>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> </colgroup><tbody><tr><th>'usage' Value</th><th>Description</th></tr><tr><td>diffuse</td><td>Diffuse map</td></tr><tr><td>opacity</td><td>Opacity map</td></tr><tr><td colspan="1">emissive</td><td colspan="1">Emissive map</td></tr><tr><td colspan="1">ambientocclusion</td><td colspan="1">Ambient occlusion map</td></tr><tr><td colspan="1">ambient</td><td colspan="1">Ambient map</td></tr><tr><td>mask</td><td>Mask map</td></tr><tr><td>detailnormal</td><td>Detail Normal map</td></tr><tr><td>normal</td><td>Normal map</td></tr><tr><td>bump</td><td>Bump map</td></tr><tr><td>height</td><td>Height map</td></tr><tr><td>displacement</td><td>Displacement map</td></tr><tr><td>specularlevel</td><td>Specular level map</td></tr><tr><td>specularcolor</td><td>Specular color map</td></tr><tr><td>specular</td><td>Specular map</td></tr><tr><td>glossiness</td><td>Glossiness map</td></tr><tr><td>roughness</td><td>Roughness map</td></tr><tr><td>anisotropylevel</td><td>Anisothropy level map</td></tr><tr><td>anisotropyangle</td><td>Anisothropy angle map</td></tr><tr><td>transmissive</td><td>Transmissive map</td></tr><tr><td>reflection</td><td>Reflection map</td></tr><tr><td>refraction</td><td>Refraction map</td></tr><tr><td>environment</td><td>Environment map (cube map)</td></tr><tr><td colspan="1">panorama</td><td colspan="1">The Panorama Map (Latitude/Longitude Map)</td></tr><tr><td colspan="1">bluenoisemask</td><td colspan="1">A 256x256 dithering texture</td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<ul>
<li>Multiple usages are supported.<ul>
<li>Example:</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">   &lt;!-- SAMPLERS --&gt;
    &lt;sampler name="baseColorMap" usage="basecolor,diffuse"/&gt;
     &lt;!-- ... --&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> 'isHidden': Boolean that indicates if the sampler should appear in the GUI</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<ul>
<li>Example:</li>
</ul>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">     &lt;!-- SAMPLERS --&gt;
    &lt;sampler name="bluenoiseMask" usage="bluenoisemask" ishidden="true"/&gt;
     &lt;!-- ... --&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Wrapping Mode:</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><tbody><tr><th>Name</th><th>Value</th></tr><tr><td rowspan="4">texture_wrap_s, texture_wrap_t, texture_wrap_r<br/><br/><br/></td><td>clamp_to_edge</td></tr><tr><td>clamp_to_border</td></tr><tr><td colspan="1">mirrored_repeat</td></tr><tr><td colspan="1">repeat<br/><br/></td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Texture Filter</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><tbody><tr><th>Name</th><th>Value</th></tr><tr><td rowspan="6">texture_min_filter, texture_mag_filter<br/><br/><br/></td><td>nearest</td></tr><tr><td>linear</td></tr><tr><td colspan="1">nearest_mipmap_nearest</td></tr><tr><td colspan="1">linear_mipmap_nearest</td></tr><tr><td colspan="1">nearest_mipmap_linear</td></tr><tr><td colspan="1">linear_mipmap_linear</td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><u>Example:</u></p>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;glslfx version="1.0.0" author="allegorithmic.com"&gt;
     &lt;!-- BODY --&gt;
     &lt;!-- ... --&gt;

     &lt;!-- SAMPLERS --&gt;
     &lt;sampler name="baseColorMap" usage="basecolor,diffuse"/&gt;
     &lt;sampler name="heightMap" usage="height"/&gt;
     &lt;sampler name="normalMap" usage="normal"/&gt;
     &lt;sampler name="detailNormalMap" usage="detailNormal"/&gt;
     &lt;sampler name="environmentMap" usage="environment"/&gt;
     &lt;sampler name="bluenoiseMask" usage="bluenoisemask" ishidden="true"/&gt;
     &lt;sampler name="sssDiffuseMap" usage="sssDiffuse"/&gt;
&lt;/glslfx&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h2>Uniforms</h2>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>This allows you to add additional information on each shader uniforms.</p>
<p><b>XML Element Definition:</b></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Name: 'uniform'</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Attributes:</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> 'name': The name of the uniform in the shader file.</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> </colgroup><tbody><tr><th>'semantic' Value</th><th>Description</th></tr><tr><td>world</td><td>World Matrix (float16)</td></tr><tr><td>worldinversetranspose</td><td>World Inverse Transpose Matrix (float16)</td></tr><tr><td>worldviewprojection</td><td>World View Projection Matrix (float16)</td></tr><tr><td>viewinverse</td><td>World Inverse Matrix (float16)</td></tr><tr><td>worldview</td><td>World View Matrix (float16)</td></tr><tr><td>modelview</td><td>Model View Matrix (float16)</td></tr><tr><td>projection</td><td>Projection Matrix (float16)</td></tr><tr><td colspan="1">ambient</td><td colspan="1">Scene Ambient Color (float3)</td></tr><tr><td colspan="1">lightposition[0..N]</td><td colspan="1">Position of the scene's Nth light (float3)</td></tr><tr><td colspan="1">lightcolor[0..N]</td><td colspan="1">Color of the scene's Nth light (float3)</td></tr><tr><td colspan="1">lightintensity[0..N]</td><td colspan="1">Intensity of the scene's Nth light (float)</td></tr><tr><td colspan="1">globaltime</td><td colspan="1">Current time in secs (float)</td></tr><tr><td colspan="1">resolution</td><td colspan="1">Viewport resolution (int2)</td></tr><tr><td colspan="1">mouse</td><td colspan="1">Mouse position (int2)</td></tr><tr><td colspan="1">samplespostablesize</td><td colspan="1">Number of samples to use to compute the environment lighting (int)</td></tr><tr><td colspan="1">irradianceshcoefs</td><td colspan="1">The array of spherical harmonics vectors (float3[10])</td></tr><tr><td colspan="1">panoramamipmapheight</td><td colspan="1">Number of mipmap levels in the panorama map (float)</td></tr><tr><td colspan="1">panoramarotation</td><td colspan="1">Angle Rotation angle of the panorama map (float)</td></tr><tr><td colspan="1">panoramaintensity</td><td colspan="1">Intensity of the panorama map (float)</td></tr><tr><td colspan="1">computebinormalinfragmentshader</td><td colspan="1">Does the binormal be computedt per fragment ? (if not then per vertex) (bool)</td></tr><tr><td colspan="1">isdirectxnormal</td><td colspan="1">Is the normal map format DirectX ? (bool)</td></tr><tr><td colspan="1">uvwscale</td><td colspan="1">Scale values of u, v, w (float3)</td></tr><tr><td colspan="1">renderuvtile</td><td colspan="1">Render only 1 UV tile ? (bool)</td></tr><tr><td colspan="1">uvtilecoords</td><td colspan="1">UV tile coordinate to render (int2)</td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>'semantic': The semantic of the uniform. (All matrices are float16).</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p style="margin-left: 60.0px;"><u>Example:</u></p>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;glslfx version="1.0.0" author="allegorithmic.com"&gt;
     &lt;!-- BODY --&gt;
     &lt;!-- ... --&gt;

     &lt;!-- MATRICES --&gt;
     &lt;uniform name="worldMatrix" semantic="world"/&gt;
     &lt;uniform name="worldViewProjMatrix" semantic="worldviewprojection"/&gt;
     &lt;uniform name="worldViewMatrix" semantic="worldview"/&gt;
     &lt;uniform name="worldInverseTransposeMatrix" semantic="worldinversetranspose"/&gt;
     &lt;uniform name="viewInverseMatrix" semantic="viewinverse"/&gt;
     &lt;uniform name="modelViewMatrix" semantic="modelview"/&gt;
     &lt;uniform name="projectionMatrix" semantic="projection"/&gt;
&lt;/glslfx&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p style="margin-left: 60.0px;"><u>Example:</u></p>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;glslfx version="1.0.0" author="allegorithmic.com"&gt;
    &lt;!-- BODY --&gt;
    &lt;!-- ... --&gt;

    &lt;!-- SCENE PARAMETERS --&gt;
    &lt;uniform name="AmbiColor" semantic="ambient"/&gt;
    &lt;uniform name="Lamp0Pos" semantic="lightposition0"/&gt;
    &lt;uniform name="Lamp0Color" semantic="lightcolor0"/&gt;
    &lt;uniform name="Lamp1Pos" semantic="lightposition1"/&gt;
    &lt;uniform name="Lamp1Color" semantic="lightcolor1"/&gt;
&lt;/glslfx&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h4 id="GLSLFXShaders-Otherparameters">Other parameters</h4>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Other additional information can be add to each uniforms to:</p>
<ul>
<li>define the default value</li>
<li>clamp values</li>
<li>control the way the uniform will be display in the application:</li>
<li>set the label</li>
<li>set the widget info used to edit the value in the application:</li>
<li>widget name, min, max, increment/decrement step</li>
<li>group uniforms in group widgets</li>
</ul>
<p>As the Uniforms can be override for each techniques, it allows to display a specific gui setup for each techniques.</p>
<p><b>XML Element Definition:</b></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Name: 'uniform'</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p> Attributes:</p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<ul>
<li>'name': The name of the uniform in the shader file.</li>
<li>'default': The uniform default value</li>
<li>'min': The min value of the validity range</li>
<li>'max': The max value of the validity range</li>
<li>'guiName': The name of the uniform in the GUI of the application</li>
<li>'guiGroup': The name of the group to put the uniform in the GUI of the application</li>
<li>'guiWidget': The name of the widget used to edit the uniform value in the GUI of application</li>
</ul>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<table><colgroup> <col/> <col/> </colgroup><tbody><tr><th>'guiWidget' Value</th><th>Description</th></tr><tr><td>slider</td><td>Slider widget for floatN</td></tr><tr><td colspan="1">angle</td><td colspan="1">Angle widget for float</td></tr><tr><td colspan="1">color</td><td colspan="1">Color widget for float3, float4 color</td></tr><tr><td colspan="1">checkbox</td><td colspan="1">CheckBox widget for bool</td></tr></tbody></table>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<ul>
<li>'guiMin': The min value of the widget</li>
<li>'guiMax': The max value of the widget</li>
</ul>
</div>
</div>
<div class="horizontalRule aem-GridColumn aem-GridColumn--default--12">
<hr style="border-bottom: 2px solid #FBB03B;"/>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h2>Example: Tessellation/Parallax</h2>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-ParallaxVertexShaderFile">Parallax Vertex Shader File</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Located in .\tessellation_parallax\parallax\vs.glsl</p><p><u>Content:</u></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<blockquote>#version 120<p>attribute vec4 iVS_Position;<br/>attribute vec4 iVS_Normal;<br/>attribute vec2 iVS_UV;<br/>attribute vec4 iVS_Tangent;<br/>attribute vec4 iVS_Binormal;</p><p>varying vec3 iFS_Normal;<br/>varying vec2 iFS_UV;<br/>varying vec3 iFS_Tangent;<br/>varying vec3 iFS_Binormal;<br/>varying vec3 iFS_PointWS;</p><p>uniform mat4 worldMatrix;<br/>uniform mat4 worldViewProjMatrix;</p><p>void main()<br/>{<br/> gl_Position = worldViewProjMatrix * iVS_Position;<br/> iFS_Normal = iVS_Normal.xyz;<br/> iFS_UV = iVS_UV;<br/> iFS_Tangent = iVS_Tangent.xyz;<br/> iFS_Binormal = iVS_Binormal.xyz;<br/> iFS_PointWS = (worldMatrix * iVS_Position).xyz;<br/>}</p></blockquote>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-TessellationVertexShaderFile">Tessellation Vertex Shader File</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Located in .\tessellation_parallax\tessellation\vs.glsl<br/><br/><u>Content:</u></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<blockquote><p>#version 120</p><p>attribute vec4 iVS_Position;<br/>attribute vec4 iVS_Normal;<br/>attribute vec2 iVS_UV;<br/>attribute vec4 iVS_Tangent;<br/>attribute vec4 iVS_Binormal;</p><p>varying vec4 oVS_Normal;<br/>varying vec2 oVS_UV;<br/>varying vec4 oVS_Tangent;<br/>varying vec4 oVS_Binormal;</p><p>void main()<br/>{<br/> gl_Position = iVS_Position;<br/> oVS_Normal = iVS_Normal;<br/> oVS_UV = iVS_UV;<br/> oVS_Tangent = iVS_Tangent;<br/> oVS_Binormal = iVS_Binormal;<br/>}</p></blockquote>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-TessellationControlShaderFile">Tessellation Control Shader File</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Located in .\tessellation_parallax\tessellation\tcs.glsl<br/><br/><u>Content:</u></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<blockquote><p>#version 400 core<br/>#extension GL_ARB_tessellation_shader : enable</p><p>layout(vertices = 3) out;</p><p>in vec4 oVS_Normal[];<br/>in vec2 oVS_UV[];<br/>in vec4 oVS_Tangent[];<br/>in vec4 oVS_Binormal[];</p><p>out vec4 oTCS_Normal[];<br/>out vec2 oTCS_UV[];<br/>out vec4 oTCS_Tangent[];<br/>out vec4 oTCS_Binormal[];</p><p>uniform float tessellationFactor;</p><p>void main()<br/>{<br/> gl_TessLevelOuter[0] = tessellationFactor;<br/> gl_TessLevelOuter[1] = tessellationFactor;<br/> gl_TessLevelOuter[2] = tessellationFactor;<br/> gl_TessLevelInner[0] = tessellationFactor;<br/> gl_out[gl_InvocationID].gl_Position = gl_in[gl_InvocationID].gl_Position;</p><p> oTCS_Normal[gl_InvocationID] = oVS_Normal[gl_InvocationID];<br/> oTCS_UV[gl_InvocationID] = oVS_UV[gl_InvocationID];<br/> oTCS_Tangent[gl_InvocationID] = oVS_Tangent[gl_InvocationID];<br/> oTCS_Binormal[gl_InvocationID] = oVS_Binormal[gl_InvocationID];<br/>}</p></blockquote>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-TessellationEvaluationShaderFile">Tessellation Evaluation Shader File</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Located in .\tessellation_parallax\tessellation\tcs.glsl<br/><br/><u>Content:</u></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<blockquote><p>#version 400 core</p><p>layout(triangles, equal_spacing, ccw) in;</p><p>in vec4 oTCS_Normal[];<br/>in vec2 oTCS_UV[];<br/>in vec4 oTCS_Tangent[];<br/>in vec4 oTCS_Binormal[];</p><p>uniform mat4 worldMatrix;<br/>uniform mat4 worldViewProjMatrix;</p><p>uniform sampler2D heightMap;</p><p>uniform float tiling = 1.0f;<br/>uniform float heightMapScale = 1.0f;</p><p>out vec3 iFS_Normal;<br/>out vec2 iFS_UV;<br/>out vec3 iFS_Tangent;<br/>out vec3 iFS_Binormal;<br/>out vec3 iFS_PointWS;</p><p>vec3 interpolate3D(vec3 v0, vec3 v1, vec3 v2, vec3 uvw)<br/>{<br/> return uvw.x * v0 + uvw.y * v1 + uvw.z * v2;<br/>}</p><p>vec2 interpolate2D(vec2 v0, vec2 v1, vec2 v2, vec3 uvw)<br/>{<br/> return uvw.x * v0 + uvw.y * v1 + uvw.z * v2;<br/>}</p><p>void main()<br/>{<br/> vec3 uvw = gl_TessCoord.xyz;</p><p> vec3 newPos = interpolate3D(gl_in[0].gl_Position.xyz, gl_in[1].gl_Position.xyz, gl_in[2].gl_Position.xyz, uvw);<br/> vec3 newNormal = normalize(interpolate3D(oTCS_Normal[0].xyz, oTCS_Normal[1].xyz, oTCS_Normal[2].xyz, uvw));<br/> vec3 newTangent = normalize(interpolate3D(oTCS_Tangent[0].xyz, oTCS_Tangent[1].xyz, oTCS_Tangent[2].xyz, uvw));<br/> vec3 newBinormal = normalize(interpolate3D(oTCS_Binormal[0].xyz, oTCS_Binormal[1].xyz, oTCS_Binormal[2].xyz, uvw));<br/> vec2 newUV = interpolate2D(oTCS_UV[0], oTCS_UV[1], oTCS_UV[2], uvw);</p><p> float heightTexSample = texture(heightMap, newUV * tiling).x * 2.0 - 1.0;<br/> newPos += newNormal * heightTexSample * heightMapScale;</p><p> vec4 obj_pos = vec4(newPos, 1);<br/> gl_Position = worldViewProjMatrix * obj_pos;</p><p> iFS_UV = newUV * tiling;<br/> iFS_Tangent = newTangent;<br/> iFS_Binormal = newBinormal;<br/> iFS_Normal = newNormal;<br/> iFS_PointWS = (worldMatrix * obj_pos).xyz;<br/>}</p></blockquote>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-FragmentShaderFile">Fragment Shader File</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Located in .\tessellation_parallax\fs.glsl<br/><br/><u>Content:</u></p>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<blockquote><p>#version 120</p><p>// #define ALG_NORMAL_DIRECTX<br/>#define ALG_NORMAL_OPENGL</p><p>#ifdef ALG_NORMAL_DIRECTX<br/> // #define FLIP_NORMAL_X<br/>#define FLIP_NORMAL_Y<br/> // #define FLIP_NORMAL_Z<br/>#endif //#ifdef ALG_NORMAL_DIRECTX</p><p>#ifdef ALG_NORMAL_OPENGL<br/> // #define FLIP_NORMAL_X<br/>#define FLIP_NORMAL_Y<br/> // #define FLIP_NORMAL_Z<br/>#endif //#ifdef ALG_NORMAL_OPENGL</p><p>varying vec3 iFS_Normal;<br/>varying vec2 iFS_UV;<br/>varying vec3 iFS_Tangent;<br/>varying vec3 iFS_Binormal;<br/>varying vec3 iFS_PointWS;</p><p>uniform vec3 Lamp0Pos = vec3(0.0f,0.0f,70.0f);<br/>uniform vec3 Lamp0Color = vec3(1.0f,1.0f,1.0f);<br/>uniform vec3 Lamp1Pos = vec3(70.0f,0.0f,0.0f);<br/>uniform vec3 Lamp1Color = vec3(0.198f,0.198f,0.198f);<br/>uniform bool flipNormal = true;<br/>uniform float TilingDetail = 3.0f;<br/>uniform float SpecExpon = 50.0;<br/>uniform float Ks = 1.0;<br/>uniform int parallax_mode = 0;<br/>uniform float tessellationFactor = 4.0;<br/>uniform float heightMapScale = 1.0f;<br/>uniform float Depth_detail = 0.5f;<br/>uniform float Kr = 0.5f;<br/>uniform int KF_on = 1;<br/>uniform float KFs = 1.0f;<br/>uniform vec3 AmbiColor = vec3(0.07f,0.07f,0.07f);<br/>uniform float tiling = 1.0f;<br/>uniform int enableTilingInFS = 0;</p><p>uniform sampler2D heightMap;<br/>uniform sampler2D normalMap;<br/>uniform sampler2D detailNormalMap;<br/>uniform sampler2D emissiveMap;<br/>uniform sampler2D diffuseMap;<br/>uniform sampler2D specularMap;<br/>uniform sampler2D opacityMap;<br/>uniform samplerCube environmentMap;</p><p>uniform mat4 worldMatrix;<br/>uniform mat4 worldInverseTransposeMatrix;<br/>uniform mat4 viewInverseMatrix;</p><p>vec4 litFct(float NdotL, float NdotH, float specExp)<br/>{<br/> float ambient = 1.0;<br/> float diffuse = max(NdotL, 0.0);<br/> float specular = step(0.0, NdotL) * pow(max(0.0, NdotH), specExp);<br/> return vec4(ambient, diffuse, specular, 1.0);<br/>}</p><p>vec3 lerpFct(vec3 v0, vec3 v1, float percent)<br/>{<br/> return v0 + (v1-v0) * percent;<br/>}</p><p>// Phong Shading<br/>void phong_shading(<br/>in vec3 LightColor,<br/>in vec3 normalWS,<br/>in vec3 pointToLightDirWS,<br/>in vec3 pointToCameraDirWS,<br/>inout vec3 DiffuseContrib,<br/>inout vec3 SpecularContrib)<br/>{<br/> vec3 Hn = normalize(pointToCameraDirWS + pointToLightDirWS);<br/> vec4 litV = litFct(dot(normalWS, pointToLightDirWS), dot(normalWS, Hn), SpecExpon);<br/> DiffuseContrib = litV.y * LightColor;<br/> SpecularContrib = litV.y * litV.z * Ks * LightColor;<br/>}</p><p>vec3 fixNormalSample(vec3 v)<br/>{<br/> vec3 result = v - vec3(0.5,0.5,0.5);</p><p>#ifdef FLIP_NORMAL_X<br/> result.x = -result.x;<br/>#endif // ifdef FLIP_NORMAL_X<br/>#ifdef FLIP_NORMAL_Y<br/> result.y = -result.y;<br/>#endif // ifdef FLIP_NORMAL_Y<br/>#ifdef FLIP_NORMAL_Z<br/> result.z = -result.z;<br/>#endif // ifdef FLIP_NORMAL_Z</p><p> return result;<br/>}</p><p>vec3 normalVecOSToWS(vec3 normal)<br/>{<br/> return normal;<br/>}</p><p>void main()<br/>{<br/> vec3 cameraPosWS = viewInverseMatrix[3].xyz;<br/> vec3 pointToLight0DirWS = normalize(Lamp0Pos - iFS_PointWS);<br/> vec3 pointToLight1DirWS = normalize(Lamp1Pos - iFS_PointWS);<br/> vec3 pointToCameraDirWS = normalize(cameraPosWS);<br/> vec3 normalOS = normalize(iFS_Normal);<br/> vec3 tangentOS = normalize(iFS_Tangent);<br/> vec3 binormalOS = normalize(iFS_Binormal);</p><p> // ------------------------------------------<br/> // Make sure the TBN is Orthonormalized<br/> binormalOS = normalize(cross(normalOS, tangentOS));<br/> tangentOS = normalize(cross(binormalOS, normalOS));</p><p> vec3 cumulatedNormalOS = normalOS;</p><p> // ------------------------------------------<br/> // Update UV<br/> float a = dot(normalOS,-pointToCameraDirWS);<br/> vec3 s = vec3(dot(pointToCameraDirWS,tangentOS), dot(pointToCameraDirWS,binormalOS), a);<br/> vec2 uv = enableTilingInFS == 0 ? iFS_UV : (iFS_UV * tiling);<br/> float height = texture2D(heightMap,uv).x * 2.0 - 1.0 ;<br/> float parallax = parallax_mode == 0 ? (tessellationFactor / 100000.f + heightMapScale / 500.f) : (heightMapScale / 50.f);<br/> uv += (height * s.xy * parallax) ;</p><p> // ------------------------------------------<br/> // Add Normal from normalMap<br/> vec3 normalTS = texture2D(normalMap,uv).xyz;<br/> normalTS = fixNormalSample(normalTS);<br/> vec3 normalMapOS = normalTS.x*tangentOS + normalTS.y*binormalOS;<br/> cumulatedNormalOS = cumulatedNormalOS + normalMapOS;<br/> cumulatedNormalOS = normalize(cumulatedNormalOS);</p><p> // ------------------------------------------<br/> // Add detail normalmap<br/> vec3 normalDetailTS = texture2D(detailNormalMap,uv*TilingDetail).xyz;<br/> normalDetailTS = fixNormalSample(normalDetailTS);<br/> vec3 variableNormalDetailTS = lerpFct(vec3(0.0,0.0,0.5),normalDetailTS,Depth_detail);<br/> vec3 normalDetailOS = variableNormalDetailTS.x*tangentOS + variableNormalDetailTS.y*binormalOS;<br/> cumulatedNormalOS = cumulatedNormalOS + normalDetailOS;<br/> cumulatedNormalOS = normalize(cumulatedNormalOS);</p><p> if (length(normalTS)&lt;0.0001)<br/> cumulatedNormalOS = normalOS;</p><p> vec3 cumulatedNormalWS = normalVecOSToWS(cumulatedNormalOS);</p><p> // ------------------------------------------<br/> // Compute Diffuse &amp; Specular</p><p> // Light 0 contribution<br/> vec3 diffContrib = vec3(0, 0, 0);<br/> vec3 specContrib = vec3(0, 0, 0);<br/> phong_shading(Lamp0Color, cumulatedNormalWS, pointToLight0DirWS, pointToCameraDirWS, diffContrib, specContrib);</p><p> // Light 1 contribution<br/> vec3 diffContrib2 = vec3(0, 0, 0);<br/> vec3 specContrib2 = vec3(0, 0, 0); <br/> phong_shading(Lamp1Color, cumulatedNormalWS, pointToLight1DirWS, pointToCameraDirWS, diffContrib2, specContrib2);</p><p> diffContrib += diffContrib2;<br/> specContrib += specContrib2;</p><p> vec4 diffuseColor = texture2D(diffuseMap,uv);</p><p> vec3 specularColor = texture2D(specularMap,uv).rgb;<br/> vec3 R = reflect(pointToCameraDirWS,cumulatedNormalWS);<br/> vec3 reflColor = Kr * textureCube(environmentMap,R.xyz).bgr;</p><p> float FallofRefl;</p><p> if (KFs &gt;= 0.0)<br/> FallofRefl = max((1-dot(pointToCameraDirWS/(KFs),cumulatedNormalWS)),0)*KF_on;<br/> else<br/> FallofRefl = (1-max(((1-dot(pointToCameraDirWS/(-KFs),cumulatedNormalWS))),0))*KF_on;</p><p> if (KF_on == 0)<br/> FallofRefl=1.0;</p><p> vec3 Ambiant_final = diffuseColor.rgb*AmbiColor;</p><p> // ------------------------------------------<br/> vec3 emissive = texture2D(emissiveMap,uv).xyz;</p><p> vec3 finalcolor = Ambiant_final<br/> + specularColor*specContrib<br/> + diffuseColor.rgb*diffContrib<br/> + (reflColor*specularColor*FallofRefl)<br/> + emissive;</p><p> // Final Color<br/> vec4 finalColor4 = vec4(finalcolor, texture2D(opacityMap,uv));</p><p> gl_FragColor = finalColor4;<br/>}</p></blockquote>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h3 id="GLSLFXShaders-GLSLFXFile">GLSLFX File</h3>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>The glslfx file defines two techniques to render the geometry:</p><ul><li>One uses the hardware tessellation technique</li><li>The other based on a parallax effect that will be used as a fall-back if the user hardware don't support the Tessellation.</li></ul><p>Located in .\tessellation_parallax\fs.glsl</p><p><u>Content:</u></p>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="xml" data-gutter="true">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE sbsbatchnode SYSTEM "glslfx.dtd"&gt;
&lt;glslfx version="1.0.0" author="allegorithmic.com"&gt;

    &lt;!-- TECHNIQUES --&gt;
    &lt;technique name="Tesselation"&gt;
        &lt;!-- PROPERTIES --&gt;
        &lt;property name="blend_enabled" value="true"/&gt;
        &lt;property name="blend_func" value="src_alpha,one_minus_src_alpha"/&gt;
        &lt;property name="cull_face_enabled" value="true"/&gt;
        &lt;property name="cull_face_mode" value="back"/&gt;

        &lt;!-- SHADERS --&gt;
        &lt;shader type="vertex" filename="tessellation_parallax/tessellation/vs.glsl" primitiveType="patch4"/&gt;
        &lt;shader type="tess_control" filename="tessellation_parallax/tessellation/tcs.glsl"/&gt;
        &lt;shader type="tess_eval" filename="tessellation_parallax/tessellation/tes.glsl"/&gt;
        &lt;shader type="fragment" filename="tessellation_parallax/fs.glsl"/&gt;

        &lt;!-- UNIFORMS --&gt;
        &lt;uniform name="parallax_mode" guiName="Parallax Mode" min="0" max="0" /&gt;
        &lt;uniform name="enableTilingInFS" guiName="Tiling Enabled In FS" min="0" max="0" /&gt;
        &lt;uniform name="tessellationFactor" guiName="Tessellation Factor" default="4" min="1" max="64" guiStep="1" guiWidget="slider"/&gt;
    &lt;/technique&gt;

    &lt;technique name="Parallax"&gt;
        &lt;!-- PROPERTIES --&gt;
        &lt;property name="blend_enabled" value="true"/&gt;
        &lt;property name="blend_func" value="src_alpha,one_minus_src_alpha"/&gt;
        &lt;property name="cull_face_enabled" value="true"/&gt;
        &lt;property name="cull_face_mode" value="back"/&gt;

        &lt;!-- SHADERS --&gt;
        &lt;shader type="vertex" filename="tessellation_parallax/parallax/vs.glsl"/&gt;
        &lt;shader type="fragment" filename="tessellation_parallax/fs.glsl"/&gt;

        &lt;!-- UNIFORMS --&gt;
        &lt;uniform name="parallax_mode" guiName="Parallax Mode" min="1" max="1" /&gt;
        &lt;uniform name="enableTilingInFS" guiName="Tiling Enabled In FS" min="1" max="1" /&gt;

    &lt;/technique&gt;

    &lt;!-- INPUT VERTEX FORMAT --&gt;
    &lt;vertexformat name="iVS_Position" semantic="position"/&gt;
    &lt;vertexformat name="iVS_Normal" semantic="normal"/&gt;
    &lt;vertexformat name="iVS_UV" semantic="texcoord0"/&gt;
    &lt;vertexformat name="iVS_Tangent" semantic="tangent0"/&gt;
    &lt;vertexformat name="iVS_Binormal" semantic="binormal0"/&gt;

    &lt;!-- SAMPLERS --&gt;
    &lt;sampler name="diffuseMap" usage="diffuse"/&gt;
    &lt;sampler name="heightMap" usage="height"/&gt;
    &lt;sampler name="normalMap" usage="normal"/&gt;
    &lt;sampler name="detailNormalMap" usage="detailNormal"/&gt;
    &lt;sampler name="emissiveMap" usage="emissive"/&gt;
    &lt;sampler name="specularMap" usage="specular"/&gt;
    &lt;sampler name="opacityMap" usage="opacity"/&gt;
    &lt;sampler name="environmentMap" usage="environment"/&gt;

    &lt;!-- MATRICES --&gt;
    &lt;uniform name="worldMatrix" semantic="world"/&gt;
    &lt;uniform name="worldViewProjMatrix" semantic="worldviewprojection"/&gt;
    &lt;uniform name="worldViewMatrix" semantic="worldview"/&gt;
    &lt;uniform name="worldInverseTransposeMatrix" semantic="worldinversetranspose"/&gt;
    &lt;uniform name="viewInverseMatrix" semantic="viewinverse"/&gt;
    &lt;uniform name="modelViewMatrix" semantic="modelview"/&gt;
    &lt;uniform name="projectionMatrix" semantic="projection"/&gt;

    &lt;!-- SCENE PARAMETERS --&gt;
    &lt;uniform name="AmbiColor" semantic="ambient"/&gt;
    &lt;uniform name="Lamp0Pos" semantic="lightposition0"/&gt;
    &lt;uniform name="Lamp0Color" semantic="lightcolor0"/&gt;
    &lt;uniform name="Lamp1Pos" semantic="lightposition1"/&gt;
    &lt;uniform name="Lamp1Color" semantic="lightcolor1"/&gt;

    &lt;!-- UNIFORMS --&gt;
    &lt;uniform name="tiling" guiName="Tiling" default="1" min="1" guiWidget="slider" guiMax="10"/&gt;
    &lt;uniform name="heightMapScale" guiGroup="Height" guiName="Scale" default="1" min="0" guiWidget="slider" guiMin="-50" guiMax="50" /&gt;
    &lt;uniform name="TilingDetail" guiGroup="Detail Normal" guiName="Tiling" default="3" min="1" guiWidget="slider" guiMax="10"/&gt;
    &lt;uniform name="Depth_detail" guiGroup="Detail Normal" guiName="Intensity" default="0.5" min="0" max="1" guiStep="0.05" guiWidget="slider"/&gt;
    &lt;uniform name="SpecExpon" guiGroup="Specular" guiName="Power" default="50" min="1" guiWidget="slider" guiMax="128"/&gt;
    &lt;uniform name="Ks" guiGroup="Specular" guiName="Intensity" default="1" min="0" guiWidget="slider" guiMax="3"/&gt;
    &lt;uniform name="Kr" guiGroup="Reflection" guiName="Intensity" default="0.5" min="0" max="1" guiStep="0.01" guiWidget="slider"/&gt;
    &lt;uniform name="KF_on" guiGroup="Reflection" guiName="Falloff" default="1" min="0" max="1" guiStep="1" guiWidget="slider"/&gt;
    &lt;uniform name="KFs" guiGroup="Reflection" guiName="Falloff Size" default="1" min="-1" max="1" guiStep="0.05" guiWidget="slider"/&gt;

&lt;/glslfx&gt;</pre>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p><em> <br/></em></p><p><em> <br/></em></p>
</div>
</div>
</div>
</div></body>