<header><meta name="title" content="Adding actions to the Explorer toolbar | Substance 3D Designer"><meta name="description" content="Designer > Scripting > Adding actions to the Explorer toolbar"></header><body><div class="dexter-Position is-Editor-false" daa-im="true" daa-lh="Helpx In-article Navigation" data-animations="[]" id="root_content_flex_items_position" role="">
<div class="aem-Grid aem-Grid--12 aem-Grid--default--12">
<div class="text first-heading aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<h1 id="mainpagetitle">Adding actions to the Explorer toolbar</h1>
</div>
</div>
<div class="text aem-GridColumn aem-GridColumn--default--12">
<div class="cmp-text">
<p>Plugins can add <i>custom actions</i> to the <b>Explorer</b> toolbar using the callbacks and methods available in the <b>SDUIMgr</b> class.</p>
<h3>Sample Explorer Toolbar Actions plugin</h3>
</div>
</div>
<div class="codeblock parbase aem-GridColumn aem-GridColumn--default--12"><div></div>
<pre data-enlighter-language="plain" data-gutter="true">import sd 
 
import os 
from functools import partial 
 
from PySide2 import QtWidgets 
 
explorerCreatedCallbackID = None 
explorerSelectionChangedCallbackIDs = [] 
 
def onActionTriggered(explorerID, uiMgr): 
    '''Called when the user clicks on the toolbar icon.''' 
 
    print("Selected items:") 
    print("---------------") 
    for item in uiMgr.getExplorerSelection(explorerID): 
        print(item) 
    print("n") 
 
def explorerSelectionChanged(explorerID, uiMgr, action, originalExplorerID): 
    '''Called when the selection in the explorer panel changes.''' 
 
    # Ignore callbacks for other explorer panels. 
    if explorerID != originalExplorerID: 
        return 
 
    print("Explorer selection changed, id = %s" % explorerID) 
 
    # Enable or disable the action depending on the explorer selection. 
    selection = uiMgr.getExplorerSelection(explorerID) 
    action.setEnabled(len(selection) != 0) 
 
def explorerCreated(explorerID, uiMgr): 
    '''Called when a new explorer panel is created.''' 
 
    print("Explorer created, id = %s" % explorerID) 
 
    # Warning: It is important to parent the action to some Qt object. 
    # If the action is not parented, Python will garbage collect it. 
    act = QtWidgets.QAction("P", parent=uiMgr.getMainWindow()) 
    uiMgr.addActionToExplorerToolbar(explorerID, act) 
    act.setToolTip("Print explorer selection to the console") 
    act.triggered.connect(partial(onActionTriggered, explorerID=explorerID, uiMgr=uiMgr)) 
 
    # Register a selection changed callback to update the action enabled state. 
    global explorerSelectionChangedCallbackIDs 
    explorerSelectionChangedCallbackIDs.append(uiMgr.registerExplorerSelectionChangedCallback( 
        partial(explorerSelectionChanged, uiMgr=uiMgr, action=act, originalExplorerID=explorerID))) 
 
    # Set initial enabled / disabled state. 
    explorerSelectionChanged(explorerID, uiMgr, act, explorerID) 
 
def initializeSDPlugin(): 
    ctx = sd.getContext() 
    app = ctx.getSDApplication() 
    uiMgr = app.getQtForPythonUIMgr() 
 
    # Register an explorer created callback to add actions to newly created explorer toolbars. 
    global explorerCreatedCallbackID 
    explorerCreatedCallbackID = uiMgr.registerExplorerCreatedCallback(partial(explorerCreated, uiMgr=uiMgr)) 
 
def uninitializeSDPlugin(): 
    ctx = sd.getContext() 
    app = ctx.getSDApplication() 
    uiMgr = app.getQtForPythonUIMgr() 
 
    # Unregister all callbacks. 
    global explorerCreatedCallbackID 
    uiMgr.unregisterCallback(explorerCreatedCallbackID) 
 
    global explorerSelectionChangedCallbackIDs 
    for callbackID in explorerSelectionChangedCallbackIDs: 
        uiMgr.unregisterCallback(callbackID)</pre>
</div>
</div>
</div></body>